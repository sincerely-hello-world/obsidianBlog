
## 香橙派自身进行

查看 系统磁盘
使用 lsblk 确认SD卡盘符
```
直接使用香橙派自身进行的话：
orangepi@orangepi5b:~$ lsblk
NAME         MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda            8:0    1 29.7G  0 disk
mmcblk0      179:0    0 58.2G  0 disk
├─mmcblk0p1  179:1    0    1G  0 part
└─mmcblk0p2  179:2    0 56.6G  0 part
mmcblk0boot0 179:32   0    4M  1 disk
mmcblk0boot1 179:64   0    4M  1 disk
mmcblk1      179:96   0 29.7G  0 disk
├─mmcblk1p1  179:97   0    1G  0 part /boot
└─mmcblk1p2  179:98   0 28.4G  0 part /
zram0        254:0    0  3.8G  0 disk [SWAP]
zram1        254:1    0  200M  0 disk /var/log

```
拷贝：mmcblk1为香橙派自身SD系统盘， /dev/sda是空白的SD卡
```
sudo dd if=/dev/mmcblk1 of=/dev/sda bs=4M status=progress # oflag=sync
```


---
## 使用虚拟机进行
```
sdb      8:16   1  29.7G  0 disk 
├─sdb1   8:17   1     1G  0 part /media/focal/opi_boot
└─sdb2   8:18   1  28.4G  0 part /media/focal/opi_root
```

```
sudo umount /dev/sdb* # 先确保导出的SD卡 umount!!!

dd if=/dev/sdb of=/mnt/hgfs/focal/flyv0111.img  bs=4M  status=progress # 进行整盘复制
```



dd if=/dev/mmcblk1 of=/dev/sda bs=4M  status=progress
sudo dd if=/dev/mmcblk1 of=/dev/sda bs=4M status=progress oflag=sync

+ [ ] 确定 /dev/mmcblk1 是orangepi自身的SD卡a, 是配置好的系统盘；
+ [ ] 确定 /dev/sda          是SD卡b，要将数据备份到b。
+ [ ] 同时，为了显示进度， status=progress；
+ [ ] 为了确保传输更准确，oflag=sync； （但是会变慢许多）
+ [ ] 32G拷贝历时45分钟

---
## 拷贝用 cmd

dd if=/dev/mmcblk1 /dev/sda bs=4M status=progress





## dd --help
```bash
# dd --help
Usage: dd [OPERAND]...
  or:  dd OPTION
Copy a file, converting and formatting according to the operands.

  bs=BYTES        read and write up to BYTES bytes at a time (default: 512);
                  overrides ibs and obs
  cbs=BYTES       convert BYTES bytes at a time
  conv=CONVS      convert the file as per the comma separated symbol list
  count=N         copy only N input blocks
  ibs=BYTES       read up to BYTES bytes at a time (default: 512)
  if=FILE         read from FILE instead of stdin
  iflag=FLAGS     read as per the comma separated symbol list
  obs=BYTES       write BYTES bytes at a time (default: 512)
  of=FILE         write to FILE instead of stdout
  oflag=FLAGS     write as per the comma separated symbol list
  seek=N          skip N obs-sized blocks at start of output
  skip=N          skip N ibs-sized blocks at start of input
  status=LEVEL    The LEVEL of information to print to stderr;
                  'none' suppresses everything but error messages,
                  'noxfer' suppresses the final transfer statistics,
                  'progress' shows periodic transfer statistics

N and BYTES may be followed by the following multiplicative suffixes:
c =1, w =2, b =512, kB =1000, K =1024, MB =1000*1000, M =1024*1024, xM =M,
GB =1000*1000*1000, G =1024*1024*1024, and so on for T, P, E, Z, Y.

Each CONV symbol may be:

  ascii     from EBCDIC to ASCII
  ebcdic    from ASCII to EBCDIC
  ibm       from ASCII to alternate EBCDIC
  block     pad newline-terminated records with spaces to cbs-size
  unblock   replace trailing spaces in cbs-size records with newline
  lcase     change upper case to lower case
  ucase     change lower case to upper case
  sparse    try to seek rather than write the output for NUL input blocks
  swab      swap every pair of input bytes
  sync      pad every input block with NULs to ibs-size; when used
            with block or unblock, pad with spaces rather than NULs
  excl      fail if the output file already exists
  nocreat   do not create the output file
  notrunc   do not truncate the output file
  noerror   continue after read errors
  fdatasync  physically write output file data before finishing
  fsync     likewise, but also write metadata

Each FLAG symbol may be:

  append    append mode (makes sense only for output; conv=notrunc suggested)
  direct    use direct I/O for data
  directory  fail unless a directory
  dsync     use synchronized I/O for data
  sync      likewise, but also for metadata
  fullblock  accumulate full blocks of input (iflag only)
  nonblock  use non-blocking I/O
  noatime   do not update access time
  nocache   Request to drop cache.  See also oflag=sync
  noctty    do not assign controlling terminal from file
  nofollow  do not follow symlinks
  count_bytes  treat 'count=N' as a byte count (iflag only)
  skip_bytes  treat 'skip=N' as a byte count (iflag only)
  seek_bytes  treat 'seek=N' as a byte count (oflag only)

Sending a USR1 signal to a running 'dd' process makes it
print I/O statistics to standard error and then resume copying.

Options are:

      --help     display this help and exit
      --version  output version information and exit

GNU coreutils online help: <https://www.gnu.org/software/coreutils/>
Full documentation at: <https://www.gnu.org/software/coreutils/dd>
or available locally via: info '(coreutils) dd invocation'

```